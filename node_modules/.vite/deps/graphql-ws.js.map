{
  "version": 3,
  "sources": ["../../graphql-ws/dist/common-CGW11Fyb.js", "../../graphql-ws/dist/client.js", "../../graphql-ws/dist/server-3ewaJSjp.js"],
  "sourcesContent": ["function extendedTypeof(val) {\r\n  if (val === null) {\r\n    return \"null\";\r\n  }\r\n  if (Array.isArray(val)) {\r\n    return \"array\";\r\n  }\r\n  return typeof val;\r\n}\r\nfunction isObject(val) {\r\n  return extendedTypeof(val) === \"object\";\r\n}\r\nfunction isAsyncIterable(val) {\r\n  return typeof Object(val)[Symbol.asyncIterator] === \"function\";\r\n}\r\nfunction isAsyncGenerator(val) {\r\n  return isObject(val) && typeof Object(val)[Symbol.asyncIterator] === \"function\" && typeof val.return === \"function\";\r\n}\r\nfunction areGraphQLFormattedErrors(obj) {\r\n  return Array.isArray(obj) && // must be at least one error\r\n  obj.length > 0 && // error has at least a message\r\n  obj.every((ob) => \"message\" in ob);\r\n}\r\nfunction limitCloseReason(reason, whenTooLong) {\r\n  return reason.length < 124 ? reason : whenTooLong;\r\n}\r\n\r\nconst GRAPHQL_TRANSPORT_WS_PROTOCOL = \"graphql-transport-ws\";\r\nconst DEPRECATED_GRAPHQL_WS_PROTOCOL = \"graphql-ws\";\r\nvar CloseCode = /* @__PURE__ */ ((CloseCode2) => {\r\n  CloseCode2[CloseCode2[\"InternalServerError\"] = 4500] = \"InternalServerError\";\r\n  CloseCode2[CloseCode2[\"InternalClientError\"] = 4005] = \"InternalClientError\";\r\n  CloseCode2[CloseCode2[\"BadRequest\"] = 4400] = \"BadRequest\";\r\n  CloseCode2[CloseCode2[\"BadResponse\"] = 4004] = \"BadResponse\";\r\n  CloseCode2[CloseCode2[\"Unauthorized\"] = 4401] = \"Unauthorized\";\r\n  CloseCode2[CloseCode2[\"Forbidden\"] = 4403] = \"Forbidden\";\r\n  CloseCode2[CloseCode2[\"SubprotocolNotAcceptable\"] = 4406] = \"SubprotocolNotAcceptable\";\r\n  CloseCode2[CloseCode2[\"ConnectionInitialisationTimeout\"] = 4408] = \"ConnectionInitialisationTimeout\";\r\n  CloseCode2[CloseCode2[\"ConnectionAcknowledgementTimeout\"] = 4504] = \"ConnectionAcknowledgementTimeout\";\r\n  CloseCode2[CloseCode2[\"SubscriberAlreadyExists\"] = 4409] = \"SubscriberAlreadyExists\";\r\n  CloseCode2[CloseCode2[\"TooManyInitialisationRequests\"] = 4429] = \"TooManyInitialisationRequests\";\r\n  return CloseCode2;\r\n})(CloseCode || {});\r\nvar MessageType = /* @__PURE__ */ ((MessageType2) => {\r\n  MessageType2[\"ConnectionInit\"] = \"connection_init\";\r\n  MessageType2[\"ConnectionAck\"] = \"connection_ack\";\r\n  MessageType2[\"Ping\"] = \"ping\";\r\n  MessageType2[\"Pong\"] = \"pong\";\r\n  MessageType2[\"Subscribe\"] = \"subscribe\";\r\n  MessageType2[\"Next\"] = \"next\";\r\n  MessageType2[\"Error\"] = \"error\";\r\n  MessageType2[\"Complete\"] = \"complete\";\r\n  return MessageType2;\r\n})(MessageType || {});\r\nfunction validateMessage(val) {\r\n  if (!isObject(val)) {\r\n    throw new Error(\r\n      `Message is expected to be an object, but got ${extendedTypeof(val)}`\r\n    );\r\n  }\r\n  if (!val.type) {\r\n    throw new Error(`Message is missing the 'type' property`);\r\n  }\r\n  if (typeof val.type !== \"string\") {\r\n    throw new Error(\r\n      `Message is expects the 'type' property to be a string, but got ${extendedTypeof(\r\n        val.type\r\n      )}`\r\n    );\r\n  }\r\n  switch (val.type) {\r\n    case \"connection_init\" /* ConnectionInit */:\r\n    case \"connection_ack\" /* ConnectionAck */:\r\n    case \"ping\" /* Ping */:\r\n    case \"pong\" /* Pong */: {\r\n      if (val.payload != null && !isObject(val.payload)) {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'payload' property to be an object or nullish or missing, but got \"${val.payload}\"`\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    case \"subscribe\" /* Subscribe */: {\r\n      if (typeof val.id !== \"string\") {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\r\n            val.id\r\n          )}`\r\n        );\r\n      }\r\n      if (!val.id) {\r\n        throw new Error(\r\n          `\"${val.type}\" message requires a non-empty 'id' property`\r\n        );\r\n      }\r\n      if (!isObject(val.payload)) {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'payload' property to be an object, but got ${extendedTypeof(\r\n            val.payload\r\n          )}`\r\n        );\r\n      }\r\n      if (typeof val.payload.query !== \"string\") {\r\n        throw new Error(\r\n          `\"${val.type}\" message payload expects the 'query' property to be a string, but got ${extendedTypeof(\r\n            val.payload.query\r\n          )}`\r\n        );\r\n      }\r\n      if (val.payload.variables != null && !isObject(val.payload.variables)) {\r\n        throw new Error(\r\n          `\"${val.type}\" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${extendedTypeof(\r\n            val.payload.variables\r\n          )}`\r\n        );\r\n      }\r\n      if (val.payload.operationName != null && extendedTypeof(val.payload.operationName) !== \"string\") {\r\n        throw new Error(\r\n          `\"${val.type}\" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${extendedTypeof(\r\n            val.payload.operationName\r\n          )}`\r\n        );\r\n      }\r\n      if (val.payload.extensions != null && !isObject(val.payload.extensions)) {\r\n        throw new Error(\r\n          `\"${val.type}\" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${extendedTypeof(\r\n            val.payload.extensions\r\n          )}`\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    case \"next\" /* Next */: {\r\n      if (typeof val.id !== \"string\") {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\r\n            val.id\r\n          )}`\r\n        );\r\n      }\r\n      if (!val.id) {\r\n        throw new Error(\r\n          `\"${val.type}\" message requires a non-empty 'id' property`\r\n        );\r\n      }\r\n      if (!isObject(val.payload)) {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'payload' property to be an object, but got ${extendedTypeof(\r\n            val.payload\r\n          )}`\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    case \"error\" /* Error */: {\r\n      if (typeof val.id !== \"string\") {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\r\n            val.id\r\n          )}`\r\n        );\r\n      }\r\n      if (!val.id) {\r\n        throw new Error(\r\n          `\"${val.type}\" message requires a non-empty 'id' property`\r\n        );\r\n      }\r\n      if (!areGraphQLFormattedErrors(val.payload)) {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(\r\n            val.payload\r\n          )}`\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    case \"complete\" /* Complete */: {\r\n      if (typeof val.id !== \"string\") {\r\n        throw new Error(\r\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\r\n            val.id\r\n          )}`\r\n        );\r\n      }\r\n      if (!val.id) {\r\n        throw new Error(\r\n          `\"${val.type}\" message requires a non-empty 'id' property`\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    default:\r\n      throw new Error(`Invalid message 'type' property \"${val.type}\"`);\r\n  }\r\n  return val;\r\n}\r\nfunction parseMessage(data, reviver) {\r\n  return validateMessage(\r\n    typeof data === \"string\" ? JSON.parse(data, reviver) : data\r\n  );\r\n}\r\nfunction stringifyMessage(msg, replacer) {\r\n  validateMessage(msg);\r\n  return JSON.stringify(msg, replacer);\r\n}\r\n\r\nexport { CloseCode as C, DEPRECATED_GRAPHQL_WS_PROTOCOL as D, GRAPHQL_TRANSPORT_WS_PROTOCOL as G, MessageType as M, isAsyncGenerator as a, isAsyncIterable as b, isObject as i, limitCloseReason as l, parseMessage as p, stringifyMessage as s, validateMessage as v };\r\n", "import { i as isObject, G as GRAPHQL_TRANSPORT_WS_PROTOCOL, s as stringifyMessage, M as MessageType, C as CloseCode, l as limitCloseReason, p as parseMessage } from './common-CGW11Fyb.js';\r\nexport { D as DEPRECATED_GRAPHQL_WS_PROTOCOL, v as validateMessage } from './common-CGW11Fyb.js';\r\n\r\nfunction createClient(options) {\r\n  const {\r\n    url,\r\n    connectionParams,\r\n    lazy = true,\r\n    onNonLazyError = console.error,\r\n    lazyCloseTimeout: lazyCloseTimeoutMs = 0,\r\n    keepAlive = 0,\r\n    disablePong,\r\n    connectionAckWaitTimeout = 0,\r\n    retryAttempts = 5,\r\n    retryWait = async function randomisedExponentialBackoff(retries2) {\r\n      const retryDelaySeconds = Math.pow(2, retries2);\r\n      await new Promise(\r\n        (resolve) => setTimeout(\r\n          resolve,\r\n          retryDelaySeconds * 1e3 + // add random timeout from 300ms to 3s\r\n          Math.floor(Math.random() * (3e3 - 300) + 300)\r\n        )\r\n      );\r\n    },\r\n    shouldRetry = isLikeCloseEvent,\r\n    on,\r\n    webSocketImpl,\r\n    /**\r\n     * Generates a v4 UUID to be used as the ID using `Math`\r\n     * as the random number generator. Supply your own generator\r\n     * in case you need more uniqueness.\r\n     *\r\n     * Reference: https://gist.github.com/jed/982883\r\n     */\r\n    generateID = function generateUUID() {\r\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\r\n        const r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\r\n        return v.toString(16);\r\n      });\r\n    },\r\n    jsonMessageReplacer: replacer,\r\n    jsonMessageReviver: reviver\r\n  } = options;\r\n  let ws;\r\n  if (webSocketImpl) {\r\n    if (!isWebSocket(webSocketImpl)) {\r\n      throw new Error(\"Invalid WebSocket implementation provided\");\r\n    }\r\n    ws = webSocketImpl;\r\n  } else if (typeof WebSocket !== \"undefined\") {\r\n    ws = WebSocket;\r\n  } else if (typeof global !== \"undefined\") {\r\n    ws = global.WebSocket || // @ts-expect-error: Support more browsers\r\n    global.MozWebSocket;\r\n  } else if (typeof window !== \"undefined\") {\r\n    ws = window.WebSocket || // @ts-expect-error: Support more browsers\r\n    window.MozWebSocket;\r\n  }\r\n  if (!ws)\r\n    throw new Error(\r\n      \"WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`\"\r\n    );\r\n  const WebSocketImpl = ws;\r\n  const emitter = (() => {\r\n    const message = /* @__PURE__ */ (() => {\r\n      const listeners2 = {};\r\n      return {\r\n        on(id, listener) {\r\n          listeners2[id] = listener;\r\n          return () => {\r\n            delete listeners2[id];\r\n          };\r\n        },\r\n        emit(message2) {\r\n          if (\"id\" in message2) listeners2[message2.id]?.(message2);\r\n        }\r\n      };\r\n    })();\r\n    const listeners = {\r\n      connecting: on?.connecting ? [on.connecting] : [],\r\n      opened: on?.opened ? [on.opened] : [],\r\n      connected: on?.connected ? [on.connected] : [],\r\n      ping: on?.ping ? [on.ping] : [],\r\n      pong: on?.pong ? [on.pong] : [],\r\n      message: on?.message ? [message.emit, on.message] : [message.emit],\r\n      closed: on?.closed ? [on.closed] : [],\r\n      error: on?.error ? [on.error] : []\r\n    };\r\n    return {\r\n      onMessage: message.on,\r\n      on(event, listener) {\r\n        const l = listeners[event];\r\n        l.push(listener);\r\n        return () => {\r\n          l.splice(l.indexOf(listener), 1);\r\n        };\r\n      },\r\n      emit(event, ...args) {\r\n        for (const listener of [...listeners[event]]) {\r\n          listener(...args);\r\n        }\r\n      }\r\n    };\r\n  })();\r\n  function errorOrClosed(cb) {\r\n    const listening = [\r\n      // errors are fatal and more critical than close events, throw them first\r\n      emitter.on(\"error\", (err) => {\r\n        listening.forEach((unlisten) => unlisten());\r\n        cb(err);\r\n      }),\r\n      // closes can be graceful and not fatal, throw them second (if error didnt throw)\r\n      emitter.on(\"closed\", (event) => {\r\n        listening.forEach((unlisten) => unlisten());\r\n        cb(event);\r\n      })\r\n    ];\r\n  }\r\n  let connecting, locks = 0, lazyCloseTimeout, retrying = false, retries = 0, disposed = false;\r\n  async function connect() {\r\n    clearTimeout(lazyCloseTimeout);\r\n    const [socket, throwOnClose] = await (connecting ?? (connecting = new Promise(\r\n      (connected, denied) => (async () => {\r\n        if (retrying) {\r\n          await retryWait(retries);\r\n          if (!locks) {\r\n            connecting = void 0;\r\n            return denied({ code: 1e3, reason: \"All Subscriptions Gone\" });\r\n          }\r\n          retries++;\r\n        }\r\n        emitter.emit(\"connecting\", retrying);\r\n        const socket2 = new WebSocketImpl(\r\n          typeof url === \"function\" ? await url() : url,\r\n          GRAPHQL_TRANSPORT_WS_PROTOCOL\r\n        );\r\n        let connectionAckTimeout, queuedPing;\r\n        function enqueuePing() {\r\n          if (isFinite(keepAlive) && keepAlive > 0) {\r\n            clearTimeout(queuedPing);\r\n            queuedPing = setTimeout(() => {\r\n              if (socket2.readyState === WebSocketImpl.OPEN) {\r\n                socket2.send(stringifyMessage({ type: MessageType.Ping }));\r\n                emitter.emit(\"ping\", false, void 0);\r\n              }\r\n            }, keepAlive);\r\n          }\r\n        }\r\n        errorOrClosed((errOrEvent) => {\r\n          connecting = void 0;\r\n          clearTimeout(connectionAckTimeout);\r\n          clearTimeout(queuedPing);\r\n          denied(errOrEvent);\r\n          if (errOrEvent instanceof TerminatedCloseEvent) {\r\n            socket2.close(4499, \"Terminated\");\r\n            socket2.onerror = null;\r\n            socket2.onclose = null;\r\n          }\r\n        });\r\n        socket2.onerror = (err) => emitter.emit(\"error\", err);\r\n        socket2.onclose = (event) => emitter.emit(\"closed\", event);\r\n        socket2.onopen = async () => {\r\n          try {\r\n            emitter.emit(\"opened\", socket2);\r\n            const payload = typeof connectionParams === \"function\" ? await connectionParams() : connectionParams;\r\n            if (socket2.readyState !== WebSocketImpl.OPEN) return;\r\n            socket2.send(\r\n              stringifyMessage(\r\n                payload ? {\r\n                  type: MessageType.ConnectionInit,\r\n                  payload\r\n                } : {\r\n                  type: MessageType.ConnectionInit\r\n                  // payload is completely absent if not provided\r\n                },\r\n                replacer\r\n              )\r\n            );\r\n            if (isFinite(connectionAckWaitTimeout) && connectionAckWaitTimeout > 0) {\r\n              connectionAckTimeout = setTimeout(() => {\r\n                socket2.close(\r\n                  CloseCode.ConnectionAcknowledgementTimeout,\r\n                  \"Connection acknowledgement timeout\"\r\n                );\r\n              }, connectionAckWaitTimeout);\r\n            }\r\n            enqueuePing();\r\n          } catch (err) {\r\n            emitter.emit(\"error\", err);\r\n            socket2.close(\r\n              CloseCode.InternalClientError,\r\n              limitCloseReason(\r\n                err instanceof Error ? err.message : String(err),\r\n                \"Internal client error\"\r\n              )\r\n            );\r\n          }\r\n        };\r\n        let acknowledged = false;\r\n        socket2.onmessage = ({ data }) => {\r\n          try {\r\n            const message = parseMessage(data, reviver);\r\n            emitter.emit(\"message\", message);\r\n            if (message.type === \"ping\" || message.type === \"pong\") {\r\n              emitter.emit(message.type, true, message.payload);\r\n              if (message.type === \"pong\") {\r\n                enqueuePing();\r\n              } else if (!disablePong) {\r\n                socket2.send(\r\n                  stringifyMessage(\r\n                    message.payload ? {\r\n                      type: MessageType.Pong,\r\n                      payload: message.payload\r\n                    } : {\r\n                      type: MessageType.Pong\r\n                      // payload is completely absent if not provided\r\n                    }\r\n                  )\r\n                );\r\n                emitter.emit(\"pong\", false, message.payload);\r\n              }\r\n              return;\r\n            }\r\n            if (acknowledged) return;\r\n            if (message.type !== MessageType.ConnectionAck)\r\n              throw new Error(\r\n                `First message cannot be of type ${message.type}`\r\n              );\r\n            clearTimeout(connectionAckTimeout);\r\n            acknowledged = true;\r\n            emitter.emit(\"connected\", socket2, message.payload, retrying);\r\n            retrying = false;\r\n            retries = 0;\r\n            connected([\r\n              socket2,\r\n              new Promise((_, reject) => errorOrClosed(reject))\r\n            ]);\r\n          } catch (err) {\r\n            socket2.onmessage = null;\r\n            emitter.emit(\"error\", err);\r\n            socket2.close(\r\n              CloseCode.BadResponse,\r\n              limitCloseReason(\r\n                err instanceof Error ? err.message : String(err),\r\n                \"Bad response\"\r\n              )\r\n            );\r\n          }\r\n        };\r\n      })()\r\n    )));\r\n    if (socket.readyState === WebSocketImpl.CLOSING) await throwOnClose;\r\n    let release = () => {\r\n    };\r\n    const released = new Promise((resolve) => release = resolve);\r\n    return [\r\n      socket,\r\n      release,\r\n      Promise.race([\r\n        // wait for\r\n        released.then(() => {\r\n          if (!locks) {\r\n            const complete = () => socket.close(1e3, \"Normal Closure\");\r\n            if (isFinite(lazyCloseTimeoutMs) && lazyCloseTimeoutMs > 0) {\r\n              lazyCloseTimeout = setTimeout(() => {\r\n                if (socket.readyState === WebSocketImpl.OPEN) complete();\r\n              }, lazyCloseTimeoutMs);\r\n            } else {\r\n              complete();\r\n            }\r\n          }\r\n        }),\r\n        // or\r\n        throwOnClose\r\n      ])\r\n    ];\r\n  }\r\n  function shouldRetryConnectOrThrow(errOrCloseEvent) {\r\n    if (isLikeCloseEvent(errOrCloseEvent) && (isFatalInternalCloseCode(errOrCloseEvent.code) || [\r\n      CloseCode.InternalServerError,\r\n      CloseCode.InternalClientError,\r\n      CloseCode.BadRequest,\r\n      CloseCode.BadResponse,\r\n      CloseCode.Unauthorized,\r\n      // CloseCode.Forbidden, might grant access out after retry\r\n      CloseCode.SubprotocolNotAcceptable,\r\n      // CloseCode.ConnectionInitialisationTimeout, might not time out after retry\r\n      // CloseCode.ConnectionAcknowledgementTimeout, might not time out after retry\r\n      CloseCode.SubscriberAlreadyExists,\r\n      CloseCode.TooManyInitialisationRequests\r\n      // 4499, // Terminated, probably because the socket froze, we want to retry\r\n    ].includes(errOrCloseEvent.code)))\r\n      throw errOrCloseEvent;\r\n    if (disposed) return false;\r\n    if (isLikeCloseEvent(errOrCloseEvent) && errOrCloseEvent.code === 1e3)\r\n      return locks > 0;\r\n    if (!retryAttempts || retries >= retryAttempts) throw errOrCloseEvent;\r\n    if (!shouldRetry(errOrCloseEvent)) throw errOrCloseEvent;\r\n    return retrying = true;\r\n  }\r\n  if (!lazy) {\r\n    (async () => {\r\n      locks++;\r\n      for (; ; ) {\r\n        try {\r\n          const [, , throwOnClose] = await connect();\r\n          await throwOnClose;\r\n        } catch (errOrCloseEvent) {\r\n          try {\r\n            if (!shouldRetryConnectOrThrow(errOrCloseEvent)) return;\r\n          } catch (errOrCloseEvent2) {\r\n            return onNonLazyError?.(errOrCloseEvent2);\r\n          }\r\n        }\r\n      }\r\n    })();\r\n  }\r\n  function subscribe(payload, sink) {\r\n    const id = generateID(payload);\r\n    let done = false, errored = false, releaser = () => {\r\n      locks--;\r\n      done = true;\r\n    };\r\n    (async () => {\r\n      locks++;\r\n      for (; ; ) {\r\n        try {\r\n          const [socket, release, waitForReleaseOrThrowOnClose] = await connect();\r\n          if (done) return release();\r\n          const unlisten = emitter.onMessage(id, (message) => {\r\n            switch (message.type) {\r\n              case MessageType.Next: {\r\n                sink.next(message.payload);\r\n                return;\r\n              }\r\n              case MessageType.Error: {\r\n                errored = true, done = true;\r\n                sink.error(message.payload);\r\n                releaser();\r\n                return;\r\n              }\r\n              case MessageType.Complete: {\r\n                done = true;\r\n                releaser();\r\n                return;\r\n              }\r\n            }\r\n          });\r\n          socket.send(\r\n            stringifyMessage(\r\n              {\r\n                id,\r\n                type: MessageType.Subscribe,\r\n                payload\r\n              },\r\n              replacer\r\n            )\r\n          );\r\n          releaser = () => {\r\n            if (!done && socket.readyState === WebSocketImpl.OPEN)\r\n              socket.send(\r\n                stringifyMessage(\r\n                  {\r\n                    id,\r\n                    type: MessageType.Complete\r\n                  },\r\n                  replacer\r\n                )\r\n              );\r\n            locks--;\r\n            done = true;\r\n            release();\r\n          };\r\n          await waitForReleaseOrThrowOnClose.finally(unlisten);\r\n          return;\r\n        } catch (errOrCloseEvent) {\r\n          if (!shouldRetryConnectOrThrow(errOrCloseEvent)) return;\r\n        }\r\n      }\r\n    })().then(() => {\r\n      if (!errored) sink.complete();\r\n    }).catch((err) => {\r\n      sink.error(err);\r\n    });\r\n    return () => {\r\n      if (!done) releaser();\r\n    };\r\n  }\r\n  return {\r\n    on: emitter.on,\r\n    subscribe,\r\n    iterate(request) {\r\n      const pending = [];\r\n      const deferred = {\r\n        done: false,\r\n        error: null,\r\n        resolve: () => {\r\n        }\r\n      };\r\n      const dispose = subscribe(request, {\r\n        next(val) {\r\n          pending.push(val);\r\n          deferred.resolve();\r\n        },\r\n        error(err) {\r\n          deferred.done = true;\r\n          deferred.error = err;\r\n          deferred.resolve();\r\n        },\r\n        complete() {\r\n          deferred.done = true;\r\n          deferred.resolve();\r\n        }\r\n      });\r\n      const iterator = async function* iterator2() {\r\n        for (; ; ) {\r\n          if (!pending.length) {\r\n            await new Promise((resolve) => deferred.resolve = resolve);\r\n          }\r\n          while (pending.length) {\r\n            yield pending.shift();\r\n          }\r\n          if (deferred.error) {\r\n            throw deferred.error;\r\n          }\r\n          if (deferred.done) {\r\n            return;\r\n          }\r\n        }\r\n      }();\r\n      iterator.throw = async (err) => {\r\n        if (!deferred.done) {\r\n          deferred.done = true;\r\n          deferred.error = err;\r\n          deferred.resolve();\r\n        }\r\n        return { done: true, value: void 0 };\r\n      };\r\n      iterator.return = async () => {\r\n        dispose();\r\n        return { done: true, value: void 0 };\r\n      };\r\n      return iterator;\r\n    },\r\n    async dispose() {\r\n      disposed = true;\r\n      if (connecting) {\r\n        const [socket] = await connecting;\r\n        socket.close(1e3, \"Normal Closure\");\r\n      }\r\n    },\r\n    terminate() {\r\n      if (connecting) {\r\n        emitter.emit(\"closed\", new TerminatedCloseEvent());\r\n      }\r\n    }\r\n  };\r\n}\r\nclass TerminatedCloseEvent extends Error {\r\n  name = \"TerminatedCloseEvent\";\r\n  message = \"4499: Terminated\";\r\n  code = 4499;\r\n  reason = \"Terminated\";\r\n  wasClean = false;\r\n}\r\nfunction isLikeCloseEvent(val) {\r\n  return isObject(val) && \"code\" in val && \"reason\" in val;\r\n}\r\nfunction isFatalInternalCloseCode(code) {\r\n  if ([\r\n    1e3,\r\n    // Normal Closure is not an erroneous close code\r\n    1001,\r\n    // Going Away\r\n    1006,\r\n    // Abnormal Closure\r\n    1005,\r\n    // No Status Received\r\n    1012,\r\n    // Service Restart\r\n    1013,\r\n    // Try Again Later\r\n    1014\r\n    // Bad Gateway\r\n  ].includes(code))\r\n    return false;\r\n  return code >= 1e3 && code <= 1999;\r\n}\r\nfunction isWebSocket(val) {\r\n  return typeof val === \"function\" && \"constructor\" in val && \"CLOSED\" in val && \"CLOSING\" in val && \"CONNECTING\" in val && \"OPEN\" in val;\r\n}\r\n\r\nexport { CloseCode, GRAPHQL_TRANSPORT_WS_PROTOCOL, MessageType, TerminatedCloseEvent, createClient, parseMessage, stringifyMessage };\r\n", "import { parse, validate, getOperationAST, GraphQLError, subscribe, execute, versionInfo } from 'graphql';\r\nimport { G as GRAPHQL_TRANSPORT_WS_PROTOCOL, C as CloseCode, p as parseMessage, M as MessageType, a as isAsyncGenerator, b as isAsyncIterable, s as stringifyMessage, i as isObject } from './common-CGW11Fyb.js';\r\n\r\nfunction makeServer(options) {\r\n  const {\r\n    schema,\r\n    context,\r\n    roots,\r\n    validate: validate$1,\r\n    execute: execute$1,\r\n    subscribe: subscribe$1,\r\n    connectionInitWaitTimeout = 3e3,\r\n    // 3 seconds\r\n    onConnect,\r\n    onDisconnect,\r\n    onClose,\r\n    onSubscribe,\r\n    onOperation,\r\n    onNext,\r\n    onError,\r\n    onComplete,\r\n    jsonMessageReviver: reviver,\r\n    jsonMessageReplacer: replacer\r\n  } = options;\r\n  return {\r\n    opened(socket, extra) {\r\n      const ctx = {\r\n        connectionInitReceived: false,\r\n        acknowledged: false,\r\n        subscriptions: {},\r\n        extra\r\n      };\r\n      if (socket.protocol !== GRAPHQL_TRANSPORT_WS_PROTOCOL) {\r\n        socket.close(\r\n          CloseCode.SubprotocolNotAcceptable,\r\n          \"Subprotocol not acceptable\"\r\n        );\r\n        return async (code, reason) => {\r\n          await onClose?.(ctx, code, reason);\r\n        };\r\n      }\r\n      const connectionInitWait = connectionInitWaitTimeout > 0 && isFinite(connectionInitWaitTimeout) ? setTimeout(() => {\r\n        if (!ctx.connectionInitReceived)\r\n          socket.close(\r\n            CloseCode.ConnectionInitialisationTimeout,\r\n            \"Connection initialisation timeout\"\r\n          );\r\n      }, connectionInitWaitTimeout) : null;\r\n      socket.onMessage(async function onMessage(data) {\r\n        let message;\r\n        try {\r\n          message = parseMessage(data, reviver);\r\n        } catch (err) {\r\n          return socket.close(CloseCode.BadRequest, \"Invalid message received\");\r\n        }\r\n        switch (message.type) {\r\n          case MessageType.ConnectionInit: {\r\n            if (ctx.connectionInitReceived)\r\n              return socket.close(\r\n                CloseCode.TooManyInitialisationRequests,\r\n                \"Too many initialisation requests\"\r\n              );\r\n            ctx.connectionInitReceived = true;\r\n            if (isObject(message.payload))\r\n              ctx.connectionParams = message.payload;\r\n            const permittedOrPayload = await onConnect?.(ctx);\r\n            if (permittedOrPayload === false)\r\n              return socket.close(CloseCode.Forbidden, \"Forbidden\");\r\n            ctx.acknowledged = true;\r\n            await socket.send(\r\n              stringifyMessage(\r\n                isObject(permittedOrPayload) ? {\r\n                  type: MessageType.ConnectionAck,\r\n                  payload: permittedOrPayload\r\n                } : {\r\n                  type: MessageType.ConnectionAck\r\n                  // payload is completely absent if not provided\r\n                },\r\n                replacer\r\n              )\r\n            );\r\n            return;\r\n          }\r\n          case MessageType.Ping: {\r\n            if (socket.onPing)\r\n              return await socket.onPing(message.payload);\r\n            await socket.send(\r\n              stringifyMessage(\r\n                message.payload ? { type: MessageType.Pong, payload: message.payload } : {\r\n                  type: MessageType.Pong\r\n                  // payload is completely absent if not provided\r\n                }\r\n              )\r\n            );\r\n            return;\r\n          }\r\n          case MessageType.Pong:\r\n            return await socket.onPong?.(message.payload);\r\n          case MessageType.Subscribe: {\r\n            if (!ctx.acknowledged)\r\n              return socket.close(CloseCode.Unauthorized, \"Unauthorized\");\r\n            const { id, payload } = message;\r\n            if (id in ctx.subscriptions)\r\n              return socket.close(\r\n                CloseCode.SubscriberAlreadyExists,\r\n                `Subscriber for ${id} already exists`\r\n              );\r\n            ctx.subscriptions[id] = null;\r\n            const emit = {\r\n              next: async (result, { id: id2, payload: payload2 }, args) => {\r\n                const { errors, ...resultWithoutErrors } = result;\r\n                const maybeResult = await onNext?.(\r\n                  ctx,\r\n                  id2,\r\n                  payload2,\r\n                  args,\r\n                  result\r\n                );\r\n                await socket.send(\r\n                  stringifyMessage(\r\n                    {\r\n                      id: id2,\r\n                      type: MessageType.Next,\r\n                      payload: maybeResult || {\r\n                        ...resultWithoutErrors,\r\n                        // omit errors completely if not defined\r\n                        ...errors ? { errors: errors.map((e) => e.toJSON()) } : {}\r\n                      }\r\n                    },\r\n                    replacer\r\n                  )\r\n                );\r\n              },\r\n              error: async (errors, { id: id2, payload: payload2 }) => {\r\n                const maybeErrors = await onError?.(ctx, id2, payload2, errors);\r\n                await socket.send(\r\n                  stringifyMessage(\r\n                    {\r\n                      id: id2,\r\n                      type: MessageType.Error,\r\n                      payload: maybeErrors || errors.map((e) => e.toJSON())\r\n                    },\r\n                    replacer\r\n                  )\r\n                );\r\n              },\r\n              complete: async (notifyClient, { id: id2, payload: payload2 }) => {\r\n                await onComplete?.(ctx, id2, payload2);\r\n                if (notifyClient)\r\n                  await socket.send(\r\n                    stringifyMessage(\r\n                      {\r\n                        id: id2,\r\n                        type: MessageType.Complete\r\n                      },\r\n                      replacer\r\n                    )\r\n                  );\r\n              }\r\n            };\r\n            try {\r\n              let execArgs;\r\n              const maybeExecArgsOrErrors = await onSubscribe?.(\r\n                ctx,\r\n                message.id,\r\n                message.payload\r\n              );\r\n              if (maybeExecArgsOrErrors) {\r\n                if (areGraphQLErrors(maybeExecArgsOrErrors))\r\n                  return id in ctx.subscriptions ? await emit.error(maybeExecArgsOrErrors, message) : void 0;\r\n                else if (Array.isArray(maybeExecArgsOrErrors))\r\n                  throw new Error(\r\n                    \"Invalid return value from onSubscribe hook, expected an array of GraphQLError objects\"\r\n                  );\r\n                execArgs = maybeExecArgsOrErrors;\r\n              } else {\r\n                if (!schema)\r\n                  throw new Error(\"The GraphQL schema is not provided\");\r\n                const args = {\r\n                  operationName: payload.operationName,\r\n                  document: parse(payload.query),\r\n                  variableValues: payload.variables\r\n                };\r\n                execArgs = {\r\n                  ...args,\r\n                  schema: typeof schema === \"function\" ? await schema(ctx, id, payload, args) : schema\r\n                };\r\n                const validationErrors = (validate$1 ?? validate)(\r\n                  execArgs.schema,\r\n                  execArgs.document\r\n                );\r\n                if (validationErrors.length > 0)\r\n                  return id in ctx.subscriptions ? await emit.error(validationErrors, message) : void 0;\r\n              }\r\n              const operationAST = getOperationAST(\r\n                execArgs.document,\r\n                execArgs.operationName\r\n              );\r\n              if (!operationAST)\r\n                return id in ctx.subscriptions ? await emit.error(\r\n                  [new GraphQLError(\"Unable to identify operation\")],\r\n                  message\r\n                ) : void 0;\r\n              if (!(\"rootValue\" in execArgs))\r\n                execArgs.rootValue = roots?.[operationAST.operation];\r\n              if (!(\"contextValue\" in execArgs))\r\n                execArgs.contextValue = typeof context === \"function\" ? await context(ctx, id, payload, execArgs) : context;\r\n              let operationResult;\r\n              if (operationAST.operation === \"subscription\")\r\n                operationResult = await (subscribe$1 ?? subscribe)(\r\n                  execArgs\r\n                );\r\n              else\r\n                operationResult = await (execute$1 ?? execute)(execArgs);\r\n              const maybeResult = await onOperation?.(\r\n                ctx,\r\n                id,\r\n                payload,\r\n                execArgs,\r\n                operationResult\r\n              );\r\n              if (maybeResult) operationResult = maybeResult;\r\n              if (isAsyncIterable(operationResult)) {\r\n                if (!(id in ctx.subscriptions)) {\r\n                  if (isAsyncGenerator(operationResult))\r\n                    operationResult.return(void 0);\r\n                } else {\r\n                  ctx.subscriptions[id] = operationResult;\r\n                  try {\r\n                    for await (const result of operationResult) {\r\n                      await emit.next(result, message, execArgs);\r\n                    }\r\n                  } catch (err) {\r\n                    const originalError = err instanceof Error ? err : new Error(String(err));\r\n                    await emit.error(\r\n                      [\r\n                        versionInfo.major >= 16 ? new GraphQLError(\r\n                          originalError.message,\r\n                          // @ts-ignore graphql@15 and less dont have the second arg as object (version is ensured by versionInfo.major check above)\r\n                          { originalError }\r\n                        ) : (\r\n                          // versionInfo.major <= 15\r\n                          new GraphQLError(\r\n                            originalError.message,\r\n                            null,\r\n                            null,\r\n                            null,\r\n                            null,\r\n                            originalError\r\n                          )\r\n                        )\r\n                      ],\r\n                      message\r\n                    );\r\n                  }\r\n                }\r\n              } else {\r\n                if (id in ctx.subscriptions)\r\n                  await emit.next(operationResult, message, execArgs);\r\n              }\r\n              await emit.complete(id in ctx.subscriptions, message);\r\n            } finally {\r\n              delete ctx.subscriptions[id];\r\n            }\r\n            return;\r\n          }\r\n          case MessageType.Complete: {\r\n            const subscription = ctx.subscriptions[message.id];\r\n            delete ctx.subscriptions[message.id];\r\n            if (isAsyncGenerator(subscription))\r\n              await subscription.return(void 0);\r\n            return;\r\n          }\r\n          default:\r\n            throw new Error(\r\n              `Unexpected message of type ${message.type} received`\r\n            );\r\n        }\r\n      });\r\n      return async (code, reason) => {\r\n        if (connectionInitWait) clearTimeout(connectionInitWait);\r\n        const subs = { ...ctx.subscriptions };\r\n        ctx.subscriptions = {};\r\n        await Promise.all(\r\n          Object.values(subs).filter(isAsyncGenerator).map((sub) => sub.return(void 0))\r\n        );\r\n        if (ctx.acknowledged) await onDisconnect?.(ctx, code, reason);\r\n        await onClose?.(ctx, code, reason);\r\n      };\r\n    }\r\n  };\r\n}\r\nfunction handleProtocols(protocols) {\r\n  switch (true) {\r\n    case (protocols instanceof Set && protocols.has(GRAPHQL_TRANSPORT_WS_PROTOCOL)):\r\n    case (Array.isArray(protocols) && protocols.includes(GRAPHQL_TRANSPORT_WS_PROTOCOL)):\r\n    case (typeof protocols === \"string\" && protocols.split(\",\").map((p) => p.trim()).includes(GRAPHQL_TRANSPORT_WS_PROTOCOL)):\r\n      return GRAPHQL_TRANSPORT_WS_PROTOCOL;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\nfunction areGraphQLErrors(obj) {\r\n  return Array.isArray(obj) && // must be at least one error\r\n  obj.length > 0 && // error has at least a message\r\n  obj.every((ob) => ob instanceof GraphQLError);\r\n}\r\n\r\nexport { areGraphQLErrors as a, handleProtocols as h, makeServer as m };\r\n"],
  "mappings": "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",
  "names": ["subscribe"]
}
